<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Link</title>
    <script>
        function load()
        {
            var url = document.getElementById("in").value;
            window.open(url);
        }
        window.onpageshow = function ()
        {
            var geturl = location.search;
            geturl = geturl.split("?")[1];
            let params = geturl.split('&');
            // console.log(params);
            let obj = {};
            for (let i = 0; i < params.length; i++)
            {
                let param = params[i].split('=');
                obj[param[0]] = param[1];
            }
            // console.log(obj);
            var target = decodeURIComponent(obj.target);
            document.getElementById("in").value = target;
        }
        function summon()
        {
            var url = document.getElementById("in").value;
            var encodeurl = encodeURIComponent(url);
            var target = "https://lingfengyu-dreaming.github.io/function/link.html?target=" + encodeurl;
            navigator.clipboard.writeText(target).then(function () { alert("已复制"); }, function () { alert("复制失败"); });
        }
    </script>
    <style>
        #in {
            width: 40%;
        }
    </style>
</head>

<body>
    <p>请输入访问链接：</p>
    <input type="text" id="in">
    <button onclick="load()">点击访问</button>
    <button onclick="summon()">生成当前链接并复制</button><br>
    <a href="https://lingfengyu-dreaming.github.io" target="_top">返回主站</a>
</body>

</html>